var oldCallbacks=[],rquestion=/\?/,rjsonp=/(=)\?(?=&|$)|\?\?/,nonce=jQuery.now();jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var n=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;return this[n]=!0,n}}),jQuery.ajaxPrefilter("json jsonp",function(n,o,a){var r,s,e,l=n.data,t=n.url,p=n.jsonp!==!1,c=p&&rjsonp.test(t),j=p&&!c&&"string"==typeof l&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(l);return"jsonp"===n.dataTypes[0]||c||j?(r=n.jsonpCallback=jQuery.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,s=window[r],c?n.url=t.replace(rjsonp,"$1"+r):j?n.data=l.replace(rjsonp,"$1"+r):p&&(n.url+=(rquestion.test(t)?"&":"?")+n.jsonp+"="+r),n.converters["script json"]=function(){return e||jQuery.error(r+" was not called"),e[0]},n.dataTypes[0]="json",window[r]=function(){e=arguments},a.always(function(){window[r]=s,n[r]&&(n.jsonpCallback=o.jsonpCallback,oldCallbacks.push(r)),e&&jQuery.isFunction(s)&&s(e[0]),e=s=void 0}),"script"):void 0});