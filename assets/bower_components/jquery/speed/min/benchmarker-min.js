function benchmarkList(t,e,n){return function(){benchmark(t.slice(1),e,n)}}function count(){for(i=3;i<=jQuery.benchmarker.libraries.length+2;i++){var t=jQuery("td:nth-child("+i+").fail").length,e=jQuery("td:nth-child("+i+").winner").length;jQuery("tfoot tr:first th:eq("+(i-1)+")").html("<span class='wins'>"+e+"</span> / <span class='fails'>"+t+"</span>")}}function withinTolerance(t,e,n,r){if(r)var i=e+n/100*e,a=e-n/100*e;else var i=e+n,a=e-n;return t>=a&&i>=t?!0:void 0}jQuery.benchmarker.tests=["#page","#masthead","#mastheadhd",".mastheadbd",".first",".on","div","li","a","div.mastheadbd","li.first","li.on","#page div","#dtba span","div#page","div#masthead","#page .mastheadbd","#page .first",".outer_search_container .search_container",".searchbox_container .inputtext","*","#page div.mastheadbd","#page li.first","input[name=p]","a[name=marketplace]",".outer_search_container div",".searchbox_container span","[name=p]","[name=marketplace]","ul li","form input","#page #e2econtent","#page #e2e"],jQuery.fn.benchmark=function(){this.each(function(){try{jQuery(this).parent().children("*:gt(1)").remove()}catch(t){}});var t=parseInt(jQuery("#times").val());jQuery.benchmarker.startingList=this.get(),benchmark(this.get(),t,jQuery.benchmarker.libraries)},jQuery(function(){for(i=0;i<jQuery.benchmarker.tests.length;i++)jQuery("tbody").append("<tr><td class='test'>"+jQuery.benchmarker.tests[i]+"</td></tr>");jQuery("tbody tr:first-child").remove(),jQuery("td.test").before("<td><input type='checkbox' checked='checked' /></td>"),jQuery("button.runTests").bind("click",function(){jQuery("td:has(input:checked) + td.test").benchmark()}),jQuery("button.retryTies").bind("click",function(){jQuery("tr:has(td.tie) td.test").benchmark()}),jQuery("button.selectAll").bind("click",function(){jQuery("input[type=checkbox]").each(function(){this.checked=!0})}),jQuery("button.deselectAll").bind("click",function(){jQuery("input[type=checkbox]").each(function(){this.checked=!1})}),jQuery("#addTest").bind("click",function(){jQuery("table").append("<tr><td><input type='checkbox' /></td><td><input type='text' /><button>Add</button></td></tr>"),jQuery("div#time-test > button").each(function(){this.disabled=!0}),jQuery("tbody tr:last button").bind("click",function(){var t=jQuery(this).parent();t.html("<button>-</button>"+jQuery(this).prev().val()).addClass("test"),jQuery("div#time-test > button").each(function(){this.disabled=!1}),jQuery("button",t).bind("click",function(){jQuery(this).parents("tr").remove()})})});var t=jQuery.map(jQuery.benchmarker.libraries,function(t,e){var n=0==e?"basis - ":"";return"<th>"+n+t+"</th>"}).join("");jQuery("thead tr").append(t);var e="";for(i=0;i<jQuery.benchmarker.libraries.length;i++)e+="<th></th>";var n="";for(i=0;i<jQuery.benchmarker.libraries.length;i++)n+="<td><span class='wins'>W</span> / <span class='fails'>F</span></th>";jQuery("tfoot tr:first").append(e),jQuery("tfoot tr:last").append(n)}),benchmark=function(t,e,n){if(t[0]){var e=e||50,r=t[0],a=jQuery(r).text().replace(/^-/,""),c=[];for(i=0;e+2>i;i++){var s=new Date;try{window[n[0]](a)}catch(u){}c.push(new Date-s)}var h=Math.sum(c)-Math.max.apply(Math,c)-Math.min.apply(Math,c);try{var d=window[n[0]](a),o=jQuery(a);jQuery(r).parent().append(0==o.length&&0!=d.length||d.length>0&&o.length==d.length||("cssQuery"==n[0]||"jQuery"==n[0])&&a.match(/nth\-child/)&&d.length>0||"jQold"==n[0]&&o.length>0?"<td>"+Math.round(h/e*100)/100+"ms</td>":"<td class='fail'>FAIL</td>")}catch(u){jQuery(r).parent().append("<td class='fail'>FAIL</td>")}setTimeout(benchmarkList(t,e,n),100)}else n[1]?benchmark(jQuery.benchmarker.startingList,e,n.slice(1)):(jQuery("tbody tr").each(function(){var t=jQuery("td:gt(1)",this).min(2);t.addClass(1==t.length?"winner":"tie")}),setTimeout(count,100))},jQuery.fn.maxmin=function(t,e,n){t=t||0;var r=Math[e].apply(Math,jQuery.map(this,function(t){var e=parseFloat(t.innerHTML.replace(/[^\.\d]/g,""));return e||0==e?e:void 0}));return this.filter(function(){return withinTolerance(parseFloat(this.innerHTML.replace(/[^\.\d]/g,"")),r,t,n)?!0:void 0})},jQuery.fn.max=function(t,e){return this.maxmin(t,"max",e)},jQuery.fn.min=function(t,e){return this.maxmin(t,"min",e)},Math.sum=function(t){var e=0;for(i=0;i<t.length;i++)e+=t[i];return e};